{"version":3,"sources":["../src/get_unscheduled_reports.js"],"names":["define","$","ajax","ModalFactory","CustomEvents","ModalEvents","ModalConfirmReport","reloadPage","modal","show","getRoot","on","hidden","location","reload","init","document","ready","triggerAttendanceReport","triggerGradeReport","create","type","TYPE","large","scrollable","done","getModal","events","activate","ACCEPT_BUTTON","CANCEL_BUTTON","hide","promiseGetItemsByCourse","call","methodname","args","title","body"],"mappings":"AAAAA,OAAM,gDACF,CACE,QADF,CAEE,WAFF,CAGE,oBAHF,CAIE,gCAJF,CAKE,mBALF,CAME,2CANF,CADE,CASF,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgCC,CAAhC,CAA8CC,CAA9C,CAA2DC,CAA3D,CAA+E,CAO7E,QAASC,CAAAA,CAAT,CAAoBC,CAApB,CAA2B,CACzBA,CAAK,CAACC,IAAN,GACAD,CAAK,CAACE,OAAN,GAAgBC,EAAhB,CAAmBN,CAAW,CAACO,MAA/B,CAAuCC,QAAQ,CAACC,MAAT,IAAvC,CACD,CAED,MAAO,CACLC,IAAI,CAAE,eAAW,CACfd,CAAC,CAACe,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAW,IAEvBC,CAAAA,CAAuB,CAAGjB,CAAC,CAAC,qCAAD,CAFJ,CAGvBkB,CAAkB,CAAGlB,CAAC,CAAC,8BAAD,CAHC,CAM3BE,CAAY,CAACiB,MAAb,CAAoB,CAChBC,IAAI,CAAEf,CAAkB,CAACgB,IADT,CAEhBC,KAAK,GAFW,CAGhBC,UAAU,GAHM,CAApB,CAIGN,CAJH,EAKCO,IALD,CAKM,SAASjB,CAAT,CAAgB,CAMpBA,CAAK,CAACkB,QAAN,GAAiBf,EAAjB,CAAoBP,CAAY,CAACuB,MAAb,CAAoBC,QAAxC,CALgB,CACdC,aAAa,CAAE,oCADD,CAEdC,aAAa,CAAE,qCAFD,CAKkC,CAAUD,aAA5D,CAA2E,UAAW,CACpFrB,CAAK,CAACuB,IAAN,GAEA,GAAIC,CAAAA,CAAuB,CAAG9B,CAAI,CAAC+B,IAAL,CAAU,CAAC,CACrCC,UAAU,CAAE,qDADyB,CAErCC,IAAI,CAAE,EAF+B,CAAD,CAAV,CAA9B,CAMAH,CAAuB,CAAC,CAAD,CAAvB,CAA2BP,IAA3B,CAAgC,UAAW,CACzCtB,CAAY,CAACiB,MAAb,CAAoB,CAClBgB,KAAK,CAAE,UADW,CAElBC,IAAI,CAAE,qCAFY,CAApB,EAICZ,IAJD,CAIMlB,CAJN,CAKD,CAND,CAOD,CAhBD,CAiBD,CA5BD,EA+BAJ,CAAY,CAACiB,MAAb,CAAoB,CAClBC,IAAI,CAAEf,CAAkB,CAACgB,IADP,CAElBC,KAAK,GAFa,CAGlBC,UAAU,GAHQ,CAApB,CAIGL,CAJH,EAKCM,IALD,CAKM,SAASjB,CAAT,CAAgB,CAMpBA,CAAK,CAACkB,QAAN,GAAiBf,EAAjB,CAAoBP,CAAY,CAACuB,MAAb,CAAoBC,QAAxC,CALgB,CACdC,aAAa,CAAE,oCADD,CAEdC,aAAa,CAAE,qCAFD,CAKkC,CAAUD,aAA5D,CAA2E,UAAW,CACpFrB,CAAK,CAACuB,IAAN,GAEA,GAAIC,CAAAA,CAAuB,CAAG9B,CAAI,CAAC+B,IAAL,CAAU,CAAC,CACrCC,UAAU,CAAE,gDADyB,CAErCC,IAAI,CAAE,EAF+B,CAAD,CAAV,CAA9B,CAMAH,CAAuB,CAAC,CAAD,CAAvB,CAA2BP,IAA3B,CAAgC,UAAW,CACzCtB,CAAY,CAACiB,MAAb,CAAoB,CAClBgB,KAAK,CAAE,UADW,CAElBC,IAAI,CAAE,qCAFY,CAApB,EAICZ,IAJD,CAIMlB,CAJN,CAKD,CAND,CAOD,CAhBD,CAiBD,CA5BD,CA6BD,CAlED,CAmED,CArEI,CAuER,CA5FC,CAAN","sourcesContent":["define(\n    [\n      'jquery',\n      'core/ajax',\n      'core/modal_factory',\n      'core/custom_interaction_events',\n      'core/modal_events',\n      'local_plantalentosuv/modal_confirm_report'\n    ],\n    function($, ajax, ModalFactory, CustomEvents, ModalEvents, ModalConfirmReport) {\n\n      /**\n       * Creates the modal for the course copy form\n       *\n       * @param {modalObject} modal\n       */\n      function reloadPage(modal) {\n        modal.show();\n        modal.getRoot().on(ModalEvents.hidden, location.reload(true));\n      }\n\n      return {\n        init: function() {\n          $(document).ready(function() {\n\n            var triggerAttendanceReport = $('#generate-report-attendace-sessions');\n            var triggerGradeReport = $('#generate-report-grade-items');\n\n            // Modal to confirm the generation of the attendance session report.\n            ModalFactory.create({\n                type: ModalConfirmReport.TYPE,\n                large: false,\n                scrollable: false\n            }, triggerAttendanceReport)\n            .done(function(modal) {\n              var SELECTORS = {\n                ACCEPT_BUTTON: '[data-action=\"acept-generation\"]',\n                CANCEL_BUTTON: '[data-action=\"cancel-generation\"]',\n              };\n\n              modal.getModal().on(CustomEvents.events.activate, SELECTORS.ACCEPT_BUTTON, function() {\n                modal.hide();\n\n                var promiseGetItemsByCourse = ajax.call([{\n                    methodname: 'local_plantalentosuv_get_course_attendance_sessions',\n                    args: {\n                    }\n                }]);\n\n                promiseGetItemsByCourse[0].done(function() {\n                  ModalFactory.create({\n                    title: 'Éxito',\n                    body: 'El reporte fue creado correctamente'\n                  })\n                  .done(reloadPage);\n                });\n              });\n            });\n\n            // Modal to confirm the generation of the items grade report.\n            ModalFactory.create({\n              type: ModalConfirmReport.TYPE,\n              large: false,\n              scrollable: false\n            }, triggerGradeReport)\n            .done(function(modal) {\n              var SELECTORS = {\n                ACCEPT_BUTTON: '[data-action=\"acept-generation\"]',\n                CANCEL_BUTTON: '[data-action=\"cancel-generation\"]',\n              };\n\n              modal.getModal().on(CustomEvents.events.activate, SELECTORS.ACCEPT_BUTTON, function() {\n                modal.hide();\n\n                var promiseGetItemsByCourse = ajax.call([{\n                    methodname: 'local_plantalentosuv_get_grade_items_by_course',\n                    args: {\n                    }\n                }]);\n\n                promiseGetItemsByCourse[0].done(function() {\n                  ModalFactory.create({\n                    title: 'Éxito',\n                    body: 'El reporte fue creado correctamente'\n                  })\n                  .done(reloadPage);\n                });\n              });\n            });\n          });\n        }\n      };\n    });\n"],"file":"get_unscheduled_reports.min.js"}